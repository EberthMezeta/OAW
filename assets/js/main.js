!function(e){"use strict";if(e(window).scroll(function(){e(this).scrollTop()>100?e(".back-to-top").fadeIn("slow"):e(".back-to-top").fadeOut("slow")}),e(".back-to-top").click(function(){return e("html, body").animate({scrollTop:0},1500,"easeInOutExpo"),!1}),e("#header").sticky({topSpacing:0,zIndex:"50"}),e("#intro-carousel").owlCarousel({autoplay:!0,dots:!1,loop:!0,animateOut:"fadeOut",items:1}),(new WOW).init(),e(".nav-menu").superfish({animation:{opacity:"show"},speed:400}),e("#nav-menu-container").length){var t=e("#nav-menu-container").clone().prop({id:"mobile-nav"});t.find("> ul").attr({class:"",id:""}),e("body").append(t),e("body").prepend('<button type="button" id="mobile-nav-toggle"><i class="fa fa-bars"></i></button>'),e("body").append('<div id="mobile-body-overly"></div>'),e("#mobile-nav").find(".menu-has-children").prepend('<i class="fa fa-chevron-down"></i>'),e(document).on("click",".menu-has-children i",function(t){e(this).next().toggleClass("menu-item-active"),e(this).nextAll("ul").eq(0).slideToggle(),e(this).toggleClass("fa-chevron-up fa-chevron-down")}),e(document).on("click","#mobile-nav-toggle",function(t){e("body").toggleClass("mobile-nav-active"),e("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),e("#mobile-body-overly").toggle()}),e(document).click(function(t){var n=e("#mobile-nav, #mobile-nav-toggle");n.is(t.target)||0!==n.has(t.target).length||e("body").hasClass("mobile-nav-active")&&(e("body").removeClass("mobile-nav-active"),e("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),e("#mobile-body-overly").fadeOut())})}else e("#mobile-nav, #mobile-nav-toggle").length&&e("#mobile-nav, #mobile-nav-toggle").hide();var n=e("#header").outerHeight()-1;e(document).on("click",".nav-menu a, #mobile-nav a, .scrollto",function(t){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var o=e(this.hash);if(o.length){t.preventDefault();var a=o.offset().top-n;return e("html, body").animate({scrollTop:a},1500,"easeInOutExpo"),e(this).parents(".nav-menu").length&&(e(".nav-menu .menu-active").removeClass("menu-active"),e(this).closest("li").addClass("menu-active")),e("body").hasClass("mobile-nav-active")&&(e("body").removeClass("mobile-nav-active"),e("#mobile-nav-toggle i").toggleClass("fa-times fa-bars"),e("#mobile-body-overly").fadeOut()),!1}}}),e(document).ready(function(){if(window.location.hash){var t=window.location.hash;if(e(t).length){var o=e(t).offset().top-n;e("html, body").animate({scrollTop:o},1500,"easeInOutExpo")}}});var o=e("section"),a=e(".nav-menu, #mobile-nav");e(window).on("scroll",function(){var t=e(this).scrollTop()+200;o.each(function(){var n=e(this).offset().top,o=n+e(this).outerHeight();t>=n&&t<=o&&(t<=o&&a.find("li").removeClass("menu-active"),a.find('a[href="#'+e(this).attr("id")+'"]').parent("li").addClass("menu-active")),t<300&&e(".nav-menu li:first").addClass("menu-active")})})}(jQuery);let ArrayOfNews=new Array,ArrayOfNewsSortedByDate=new Array;const MapMonths=new Map;MapMonths.set("01","January"),MapMonths.set("02","February"),MapMonths.set("03","March"),MapMonths.set("04","April"),MapMonths.set("05","May"),MapMonths.set("06","June"),MapMonths.set("07","July"),MapMonths.set("08","August"),MapMonths.set("09","September"),MapMonths.set("10","October"),MapMonths.set("11","November"),MapMonths.set("12","December");let MapSort=new Map;function loadContent(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let e=JSON.parse(this.responseText);CreateNews(e),ArrayOfNews=e,ArrayOfNewsSortedByDate=JSON.parse(this.responseText)}},t.open("GET",e,!0),t.send()}function loadContentGrouped(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){CreateGroupedNews(JSON.parse(this.responseText))}},t.open("GET",e,!0),t.send()}function getNewBySelectAllNews(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status&&"-1"!=this.responseText){let e=JSON.parse(this.responseText);CreateNews(e),ArrayOfNews=e,ArrayOfNewsSortedByDate=JSON.parse(this.responseText)}},n.open("GET",e+"?id="+t,!0),n.send()}function getNewBySelectGroupedNews(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status&&"-1"!=this.responseText){CreateGroupedNews(JSON.parse(this.responseText))}},n.open("GET",e+"?id="+t,!0),n.send()}function AddNewFeedRSS(){document.getElementById("loading").style.display="block";var e=new XMLHttpRequest;let t=document.getElementById("insert-url"),n=document.getElementById("insert-url").value;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(LoadSelect(),document.getElementById("loading").style.display="none")},e.open("GET","./resources/AddFeedRSS.php? url="+n,!0),e.send(),t.value=""}function UpdateContent(){var e=new XMLHttpRequest;e.open("GET","./resources/UpdateFeed.php",!0),e.send()}function LoadSelect(){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){CreateOptions(JSON.parse(this.responseText))}},e.open("GET","./resources/CreateOption.php",!0),e.send()}function CreateOptions(e){let t="";t+='<option value= "-1">Select a Feed</option>';for(let n=0;n<e.length;n++)t+='<option value= "'+e[n].idRSS+'">'+e[n].RSStitle+"</option>";document.getElementById("SelectRSS").innerHTML=t}function CreateNews(e){var t=document.getElementById("Content");let n="";for(let t=0;t<e.length;t++){n+='<div class="News">',n+=`<div class="img-news"> <img src = assets/img/news/${encodeURIComponent(e[t].dirimagen)} onerror='this.src="assets/img/news/default.png"; this.style.width="13%"; this.style.height="13%"; this.style.marginRight="9.5%";' align="left""> </div> `,n+="<h3>"+e[t].titulo+"</h3>",n+='<h6> <strong>Fecha: </strong> " '+e[t].fecha+'"</h6>',n+="<p> <strong>Descripción: </strong>"+e[t].descripcion+'<a href="'+e[t].enlace+'"> Read More...</a></p>',n+="<h5>"+e[t].cat+"</h5>",n+="<hr>",n+="</div>"}t.innerHTML=n,t.style.textAlign="left"}function SearchNew(e,t){let n=new Array;var o=document.getElementById("Content");for(let o=0;o<t.length;o++)t[o].titulo.includes(e)&&n.push(t[o]);n.length>0?(o.style.textAlign="left",CreateNews(n)):(o.style.fontSize="25px",o.style.textAlign="center",o.style.marginTop="2rem",o.style.marginBottom="2rem",o.innerHTML="No results found")}function CreateGroupedNews(e){const t=document.getElementById("ContentGroupedNews"),n=Object.keys(e);let o="";n.forEach(t=>{o+=getTemplateHeaders(t,"headingTwo",t);const n=Object.keys(e[t]);SortArray(n),n.forEach(n=>{o+=getTemplateHeaders(t+MapMonths.get(n),`heading${t}`,MapMonths.get(n));const a=Object.keys(e[t][n]);SortArray(a),a.forEach(a=>{o+=getTemplateHeaders(t+MapMonths.get(n)+a,`heading${t+MapMonths.get(n)}`,a),Object.keys(e[t][n][a]).forEach(s=>{o+=NewsFormat(e[t][n][a][s])}),o+="   \n        </div>\n        </div>\n        </div>"}),o+="   \n        </div>\n        </div>\n        </div>"}),o+="   \n        </div>\n    </div>\n  </div>"}),t.innerHTML=o}function NewsFormat(e){return`   \n  <div class="News">\n  <div class="img-news"> <img src = assets/img/news/${encodeURIComponent(e.dirimagen)} onerror='this.src="assets/img/news/default.png"; this.style.width="13%"; this.style.height="13%"; this.style.marginRight="9.5%";' align="left""> </div> \n  <h3>${e.titulo}</h3>\n  <h6> <strong>Fecha: </strong> ${e.fecha}</h6>\n  <p> <strong>Descripción: </strong>${e.descripcion}<a href="${e.enlace}">Read More...</a></p>\n  <h5>${e.cat}</h5>\n  <hr>\n  </div>\n  `}function getTemplateHeaders(e,t,n){return`<div class="card">\n  <div class="card-header" id="heading${e}">\n    <h5 class="mb-0">\n      <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse${e}" aria-expanded="true" aria-controls="collapse${e}"> \n      <i class="fa fa-terminal">&nbsp;</i>\n      ${n}\n      </button>\n    </h5>\n  </div>\n\n  <div id="collapse${e}" class="collapse" aria-labelledby="heading${e}" data-parent="#${t}">\n    <div class="card-body">\n  `}function SortByTitle(){this.sort=function(){ArrayOfNews.sort(function(e,t){return e.titulo.toLowerCase()>t.titulo.toLowerCase()?1:e.titulo.toLowerCase()<t.titulo.toLowerCase()?-1:0}),CreateNews(ArrayOfNews)}}function SortByDate(){this.sort=function(){CreateNews(ArrayOfNewsSortedByDate)}}function SortByDescription(){this.sort=function(){ArrayOfNews.sort(function(e,t){return e.descripcion.toLowerCase()>t.descripcion.toLowerCase()?1:e.descripcion.toLowerCase()<t.descripcion.toLowerCase()?-1:0}),CreateNews(ArrayOfNews)}}function SortByCategorie(){this.sort=function(){ArrayOfNews.sort(function(e,t){return e.cat.toLowerCase()>t.cat.toLowerCase()?1:e.cat.toLowerCase()<t.cat.toLowerCase()?-1:0}),CreateNews(ArrayOfNews)}}function SortByURL(){this.sort=function(){ArrayOfNews.sort(function(e,t){return e.enlace>t.enlace?1:e.enlace<t.enlace?-1:0})}}function SortArray(e){e.sort(function(e,t){return e>t?1:e<t?-1:0})}MapSort.set("Date",new SortByDate),MapSort.set("Title",new SortByTitle),MapSort.set("Url",new SortByURL),MapSort.set("Description",new SortByDescription),MapSort.set("Categories",new SortByCategorie),document.getElementById("NewRSSBTN").addEventListener("click",function(){AddNewFeedRSS()}),document.getElementById("UpdateRSS").addEventListener("click",function(){var e=document.getElementById("Content");let t=document.getElementById("SelectRSS").value;UpdateContent("./resources/UpdateFeed.php"),getNewBySelectAllNews("./resources/GetNews.php",t),e.style.textAlign="left"}),document.getElementById("SearchBTN").addEventListener("click",function(){SearchNew(document.getElementById("SearchInput").value,ArrayOfNews),document.getElementById("SearchInput").value=""}),document.getElementById("SelectRSS").addEventListener("change",function(){let e=document.getElementById("SelectRSS").value;getNewBySelectAllNews("./resources/GetNews.php",e),getNewBySelectGroupedNews("./resources/GetNewsGrouped.php",e)}),document.getElementById("Selection").addEventListener("change",function(){let e=document.getElementById("Selection").value;MapSort.get(e).sort()}),LoadSelect();